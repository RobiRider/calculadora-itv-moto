<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ITV Moto - RobiRider</title>
    
    <!-- Meta etiquetas para instalaci√≥n forzada en Edge/Chrome -->
    <meta name="theme-color" content="#0f172a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="RobiRider">
    <meta name="apple-mobile-web-app-title" content="RobiRider">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary: #e11d48; }
        body { 
            background-color: #f1f5f9; 
            font-family: system-ui, -apple-system, sans-serif; 
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        @media (prefers-color-scheme: dark) {
            body { background-color: #020617; color: #f8fafc; }
            .card { background: #1e293b !important; color: white; }
            input { background: #0f172a !important; color: white !important; border-color: #334155 !important; }
            .bg-slate-50 { background: #334155 !important; }
            .text-slate-400 { color: #94a3b8 !important; }
            .border-slate-200 { border-color: #334155 !important; }
        }
        .card { 
            background: white; 
            width: 100%; 
            max-width: 400px; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }
        .header-img { 
            background: #000; 
            height: 160px; 
            border-bottom: 3px solid var(--primary); 
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .header-img img { width: 100%; height: 100%; object-fit: cover; }
        input { 
            font-size: 18px !important; 
            text-align: center; 
            border: 2px solid #e2e8f0; 
            background: #f8fafc; 
            border-radius: 0.75rem; 
            padding: 0.6rem; 
            width: 100%; 
            font-weight: 800;
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .btn-calc {
            background: var(--primary);
            color: white;
            font-weight: 900;
            text-transform: uppercase;
            padding: 1rem;
            border-radius: 0.75rem;
            width: 100%;
            border: none;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-calc:active { transform: scale(0.98); }
        .btn-share {
            background: #25d366;
            color: white;
            font-weight: 800;
            padding: 0.8rem;
            border-radius: 0.75rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            border: none;
            cursor: pointer;
        }
        .ref-table { width: 100%; font-size: 10px; border-collapse: collapse; margin-top: 8px; }
        .ref-table th, .ref-table td { border: 1px solid #e2e8f0; padding: 6px; text-align: center; }
    </style>
</head>
<body>

    <div class="card">
        <div class="header-img">
            <img id="main-logo" 
                 src="https://images.unsplash.com/photo-1558981806-ec527fa84c39?q=80&w=800&auto=format&fit=crop" 
                 alt="RobiRider"
                 onerror="this.src='https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?q=80&w=800'">
        </div>
        
        <div class="bg-slate-900 py-3 text-center">
            <h1 class="text-white font-black italic uppercase text-sm tracking-tight">ITV Moto <span class="text-rose-600">Equivalencias</span></h1>
            <p class="text-rose-500 text-[8px] font-bold tracking-[0.3em] uppercase">RobiRider Edition</p>
        </div>

        <div class="p-5 flex-grow space-y-5">
            <div class="space-y-4">
                <section>
                    <label class="text-[10px] font-bold text-slate-400 uppercase">Medida Ficha T√©cnica</label>
                    <div class="grid grid-cols-3 gap-3 mt-1">
                        <input type="number" id="w1" placeholder="Ancho">
                        <input type="number" id="p1" placeholder="Perfil">
                        <input type="number" id="l1" placeholder="Llanta">
                    </div>
                </section>
                <section>
                    <label class="text-[10px] font-bold text-slate-400 uppercase">Medida Alternativa</label>
                    <div class="grid grid-cols-3 gap-3 mt-1">
                        <input type="number" id="w2" placeholder="Ancho">
                        <input type="number" id="p2" placeholder="Perfil">
                        <input type="number" id="l2" placeholder="Llanta">
                    </div>
                </section>
            </div>

            <button onclick="calc()" class="btn-calc">Verificar Ahora</button>

            <!-- Resultados y Enlace a Tablas -->
            <div id="res" class="hidden space-y-3 pt-2">
                <div id="status" class="p-3 rounded-xl text-center border-2 font-black italic text-xs uppercase"></div>
                
                <div class="bg-slate-50 p-3 rounded-xl border border-slate-200 flex justify-between items-center px-5">
                    <div>
                        <p class="text-[8px] font-bold text-slate-400 uppercase leading-none">Diferencia</p>
                        <p id="diff" class="text-2xl font-black"></p>
                    </div>
                    <p class="text-[9px] font-bold text-slate-400 italic">L√≠mite legal ¬±3%</p>
                </div>

                <!-- Aviso de Carga y Velocidad -->
                <div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 rounded-xl">
                    <p class="text-[9px] text-amber-800 dark:text-amber-200 font-bold uppercase mb-1">‚ö†Ô∏è Importante:</p>
                    <p class="text-[10px] text-amber-700 dark:text-amber-300 leading-tight">
                        El neum√°tico nuevo debe tener un <b>√çndice de Carga</b> y <b>C√≥digo de Velocidad</b> igual o superior al de la ficha t√©cnica.
                    </p>
                    <button onclick="document.getElementById('ref-details').open = true; document.getElementById('ref-details').scrollIntoView({behavior: 'smooth'})" 
                            class="text-[9px] font-black text-amber-900 dark:text-amber-100 underline mt-2 uppercase">
                        Ver tablas de √≠ndices
                    </button>
                </div>

                <button onclick="share()" class="btn-share">Compartir por WhatsApp</button>
            </div>

            <details id="ref-details" class="pt-2 border-t border-slate-200">
                <summary class="cursor-pointer font-bold text-[10px] text-rose-600 uppercase flex items-center gap-2">
                    üìã Tablas de Carga y Velocidad
                </summary>
                <div class="mt-4 space-y-4">
                    <div>
                        <p class="text-[9px] font-bold uppercase text-slate-500 mb-1">C√≥digos de Velocidad</p>
                        <table class="ref-table">
                            <tr class="bg-slate-100 dark:bg-slate-800"><th>Letra</th><th>Km/h</th><th>Letra</th><th>Km/h</th></tr>
                            <tr><td>P</td><td>150</td><td>S</td><td>180</td></tr>
                            <tr><td>T</td><td>190</td><td>H</td><td>210</td></tr>
                            <tr><td>V</td><td>240</td><td>W</td><td>270</td></tr>
                            <tr><td>(W)</td><td>>270</td><td>Y</td><td>300</td></tr>
                        </table>
                    </div>
                    <div>
                        <p class="text-[9px] font-bold uppercase text-slate-500 mb-1">√çndices de Carga (Kg por Neum√°tico)</p>
                        <table class="ref-table">
                            <tr class="bg-slate-100 dark:bg-slate-800"><th>Idx</th><th>Kg</th><th>Idx</th><th>Kg</th></tr>
                            <tr><td>50</td><td>190</td><td>54</td><td>212</td></tr>
                            <tr><td>58</td><td>236</td><td>62</td><td>265</td></tr>
                            <tr><td>66</td><td>300</td><td>70</td><td>335</td></tr>
                            <tr><td>74</td><td>375</td><td>80</td><td>450</td></tr>
                        </table>
                    </div>
                </div>
            </details>
        </div>

        <footer class="bg-slate-50 py-3 text-center border-t border-slate-200">
            <p class="text-[9px] text-slate-400 font-black uppercase tracking-widest">¬© RobiRider</p>
        </footer>
    </div>

    <script>
        // PWA Manifest
        const myManifest = {
            "name": "RobiRider ITV",
            "short_name": "RobiRider",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#0f172a",
            "theme_color": "#e11d48",
            "icons": [{
                "src": "https://images.unsplash.com/photo-1558981806-ec527fa84c39?q=80&w=512",
                "sizes": "512x512",
                "type": "image/png"
            }]
        };
        const stringManifest = JSON.stringify(myManifest);
        const blob = new Blob([stringManifest], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blob);
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestURL;
        document.head.appendChild(link);

        let msg = "";
        function calc() {
            const get = (id) => parseFloat(document.getElementById(id).value);
            const w1=get('w1'), p1=get('p1'), l1=get('l1'), w2=get('w2'), p2=get('p2'), l2=get('l2');
            
            if ([w1,p1,l1,w2,p2,l2].some(isNaN)) return;

            const d1 = (w1 * (p1 / 100) * 2) + (l1 * 25.4);
            const d2 = (w2 * (p2 / 100) * 2) + (l2 * 25.4);
            const diff = ((d2 - d1) / d1) * 100;
            const ok = Math.abs(diff) <= 3;

            document.getElementById('res').classList.remove('hidden');
            document.getElementById('diff').innerText = (diff > 0 ? "+" : "") + diff.toFixed(2) + "%";
            document.getElementById('diff').className = "text-2xl font-black " + (ok ? "text-green-600" : "text-rose-600");
            
            document.getElementById('status').innerText = ok ? "‚úÖ Equivalente" : "‚ùå No Apto";
            document.getElementById('status').className = "p-3 rounded-xl text-center border-2 " + (ok ? "border-green-500 bg-green-50 text-green-600" : "border-rose-600 bg-rose-50 text-rose-600");
            
            msg = `*RobiRider ITV*%0A*Medida:* ${w1}/${p1}-${l1}%0A*Nueva:* ${w2}/${p2}-${l2}%0A*Diff:* ${diff.toFixed(2)}%25%0A*Estado:* ${ok?'APTO ‚úÖ':'NO APTO ‚ùå'}`;
            
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
        function share() { if(msg) window.open(`https://api.whatsapp.com/send?text=${msg}`, '_blank'); }
    </script>
</body>
</html>

