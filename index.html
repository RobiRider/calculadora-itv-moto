<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calculadora ITV Moto - Sangre Motera</title>
    
    <!-- PWA Config -->
    <meta name="theme-color" content="#0f172a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" id="manifest-placeholder">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            background-color: #0f172a; 
            font-family: ui-sans-serif, system-ui, -apple-system, sans-serif; 
            overflow: hidden; 
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card { 
            background: white; 
            border-radius: 1rem; 
            width: 95%; 
            max-width: 350px; 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }
        .header-img-container { 
            background: #000; 
            height: 140px; /* Aumentado para que se aprecie mejor tu imagen */
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 2px solid #e11d48; 
            overflow: hidden;
        }
        .header-img-container img { 
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ajustado para que la foto de la moto luzca mejor */
        }
        input { 
            font-size: 16px !important; 
            text-align: center; 
            border: 1px solid #e2e8f0; 
            background: #f8fafc; 
            border-radius: 0.5rem; 
            padding: 0.4rem; 
            width: 100%; 
            font-weight: 800;
            color: #1e293b;
        }
        input:focus { 
            border-color: #e11d48; 
            outline: none; 
            background: white; 
            box-shadow: 0 0 0 2px rgba(225, 29, 72, 0.1);
        }
        label { 
            font-size: 8px; 
            font-weight: 900; 
            color: #64748b; 
            text-transform: uppercase; 
            letter-spacing: 0.05em;
            margin-bottom: 2px; 
            display: block; 
        }
        .btn-calc {
            background: #e11d48;
            color: white;
            font-weight: 900;
            text-transform: uppercase;
            font-size: 10px;
            letter-spacing: 0.1em;
            padding: 0.75rem;
            border-radius: 0.5rem;
            width: 100%;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(225, 29, 72, 0.2);
        }
        .btn-calc:active {
            transform: scale(0.96);
            background: #be123c;
        }
    </style>
</head>
<body>

    <div class="card overflow-hidden">
        <div class="header-img-container">
            <!-- Imagen subida por el usuario -->
            <img src="https://files.oaiusercontent.com/file-K98K0HlV2A8Yf5S5A7K_X5V" 
                 alt="Sangre Motera - RobiRider" 
                 onerror="this.src='https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=300'">
        </div>
        
        <div class="bg-slate-900 py-2 text-center">
            <h1 class="text-white font-black italic uppercase text-xs">Calculadora <span class="text-rose-600 font-extrabold">Equivalencias</span></h1>
            <p class="text-rose-500 text-[7px] font-bold tracking-[0.2em] uppercase">Sangre Motera</p>
        </div>

        <div class="p-4 space-y-3">
            <div class="space-y-3">
                <section>
                    <label>Medida Original</label>
                    <div class="grid grid-cols-3 gap-2">
                        <div><input type="number" id="w1" value="120"></div>
                        <div><input type="number" id="p1" value="70"></div>
                        <div><input type="number" id="l1" value="17"></div>
                    </div>
                </section>
                <section>
                    <label>Medida Alternativa</label>
                    <div class="grid grid-cols-3 gap-2">
                        <div><input type="number" id="w2" value="130"></div>
                        <div><input type="number" id="p2" value="70"></div>
                        <div><input type="number" id="l2" value="17"></div>
                    </div>
                </section>
            </div>

            <button onclick="calc()" class="btn-calc">
                Calcular Resultado
            </button>

            <div id="res" class="hidden space-y-2 pt-1">
                <div id="status" class="p-2 rounded-lg text-center border-2 font-black italic text-[10px] uppercase"></div>
                <div class="bg-slate-50 p-2 rounded-lg border border-slate-100 flex justify-between items-center px-4">
                    <div class="text-left">
                        <p class="text-[7px] font-bold text-slate-400 uppercase">Diferencia</p>
                        <p id="diff" class="text-lg font-black leading-none"></p>
                    </div>
                    <div class="text-right">
                        <p class="text-[7px] font-medium text-slate-400 italic">Límite ±3.00%</p>
                    </div>
                </div>
            </div>
        </div>

        <footer class="bg-slate-50 py-2 text-center border-t border-slate-100">
            <p class="text-[7px] text-slate-400 font-bold uppercase tracking-widest">© Sangre Motera</p>
        </footer>
    </div>

    <script>
        const manifest = {
            "name": "Sangre Motera Calculadora",
            "short_name": "ITV Moto",
            "start_url": "./index.html",
            "display": "standalone",
            "background_color": "#0f172a",
            "theme_color": "#0f172a",
            "icons": [{"src": "https://files.oaiusercontent.com/file-K98K0HlV2A8Yf5S5A7K_X5V", "sizes": "512x512", "type": "image/png"}]
        };
        const blob = new Blob([JSON.stringify(manifest)], {type:'application/json'});
        document.getElementById('manifest-placeholder').href = URL.createObjectURL(blob);

        function calc() {
            const get = (id) => parseFloat(document.getElementById(id).value);
            const w1=get('w1'), p1=get('p1'), l1=get('l1'), w2=get('w2'), p2=get('p2'), l2=get('l2');
            
            if ([w1,p1,l1,w2,p2,l2].some(isNaN)) return;

            const d1 = (w1 * (p1 / 100) * 2) + (l1 * 25.4);
            const d2 = (w2 * (p2 / 100) * 2) + (l2 * 25.4);
            const diff = ((d2 - d1) / d1) * 100;
            const ok = Math.abs(diff) <= 3;

            const resDiv = document.getElementById('res');
            const diffSpan = document.getElementById('diff');
            const statusDiv = document.getElementById('status');

            resDiv.classList.remove('hidden');
            diffSpan.innerText = (diff > 0 ? "+" : "") + diff.toFixed(2) + "%";
            diffSpan.className = "text-lg font-black " + (ok ? "text-green-600" : "text-rose-600");
            
            statusDiv.innerText = ok ? "✓ Equivalente (Apto)" : "✗ No Equivalente";
            statusDiv.className = "p-2 rounded-lg text-center border-2 " + 
                (ok ? "border-green-500 bg-green-50 text-green-600" : "border-rose-600 bg-rose-50 text-rose-600");
        }
    </script>
</body>
</html>

